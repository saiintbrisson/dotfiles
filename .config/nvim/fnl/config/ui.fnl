(local nvim (require :aniseed.nvim))

(local lsp-colors (require :lsp-colors))
(local lsp-trouble (require :trouble))
(local telescope (require :telescope))
(local which-key (require :which-key))
(local symbols-outline (require :symbols-outline))
(local lspkind (require :lspkind))
(local gitsigns (require :gitsigns))

(local g nvim.g)
(local o nvim.o)
(local wo nvim.wo)

;; Set theme TODO: move to config
(vim.cmd "set background=dark")
(vim.cmd "colorscheme gruvbox8")

;; Enable syntax highlight
(vim.cmd "syntax enable")
(vim.cmd "syntax on")

;; Disable signcolumn and split between windows
(vim.cmd "set signcolumn=no")
(vim.cmd "set fillchars=vert:\\‚ñï")
(vim.cmd "
  augroup nosplit | au!
    autocmd ColorScheme * hi VertSplit ctermfg=bg guifg=bg
    autocmd ColorScheme * hi NonText guifg=bg
  augroup end
  ")

;; Leader key
(set g.mapleader " ") ; <Space> key

(set g.auto_save 0)

(set g.rainbow_active 1) ;; Enable rainbow brackets

;; Setup dashboard extension
(set g.dashboard_default_executive "telescope")
(set g.dashboard_custom_header [
  "    ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚†§‚†ñ‚†ö‚¢â‚£©‚£≠‚°≠‚†õ‚†ì‚†≤‚†¶‚£Ñ‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä  "
  "    ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°¥‚†ã‚†Å‚†Ä‚†Ä‚†ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†≥‚¢¶‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä  "
  "    ‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°¥‚†É‚¢Ä‚°¥‚¢≥‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚£Ü‚†Ä‚†Ä‚†Ä  "
  "    ‚†Ä‚†Ä‚†Ä‚†Ä‚°æ‚†Å‚£†‚†ã‚†Ä‚†à‚¢ß‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢ß‚†Ä‚†Ä  "
  "    ‚†Ä‚†Ä‚†Ä‚£∏‚†Å‚¢∞‚†É‚†Ä‚†Ä‚†Ä‚†à‚¢£‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚£á‚†Ä  "
  "    ‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚°æ‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£π‚£Ü‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢π‚†Ä  "
  "    ‚†Ä‚†Ä‚¢∏‚†É‚¢Ä‚£á‚°à‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°ë‚¢Ñ‚°Ä‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚°á  "
  "    ‚†Ä‚†Ä‚¢∏‚†Ä‚¢ª‚°ü‚°ª‚¢∂‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚°º‚†ü‚°≥‚¢ø‚£¶‚°ë‚¢Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚°á  "
  "    ‚†Ä‚†Ä‚£∏‚†Ä‚¢∏‚†É‚°á‚¢Ä‚†á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°º‚†Ä‚†Ä‚†à‚£ø‚°ó‚†Ç‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚†Å  "
  "    ‚†Ä‚†Ä‚°è‚†Ä‚£º‚†Ä‚¢≥‚†ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†±‚£Ä‚£Ä‚†î‚£∏‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚°ü‚†Ä  "
  "    ‚†Ä‚†Ä‚°á‚¢Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚††‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚†É‚†Ä  "
  "    ‚†Ä‚¢∏‚†É‚†ò‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚†Å‚†Ä‚†Ä‚¢Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚†Ä‚†Ä  "
  "    ‚†Ä‚£∏‚†Ä‚†Ä‚†π‚°Ñ‚†Ä‚†Ä‚†à‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°û‚†Ä‚†Ä‚†Ä‚†∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä  "
  "    ‚†Ä‚°è‚†Ä‚†Ä‚†Ä‚†ô‚£Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚¢∂‚°á‚†Ä‚†Ä‚¢∞‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä  "
  "    ‚¢∞‚†á‚°Ñ‚†Ä‚†Ä‚†Ä‚°ø‚¢£‚£Ä‚£Ä‚£Ä‚°§‚†¥‚°û‚†â‚†Ä‚¢∏‚†Ä‚†Ä‚†Ä‚£ø‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£ß‚†Ä‚†Ä  "
  "    ‚£∏‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†Ä‚†Ä‚†Ä‚¢π‚†Ä‚†Ä‚¢∏‚†Ä‚†Ä‚¢Ä‚£ø‚†á‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚¢∏‚†Ä‚†Ä  "
  "    ‚£ø‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°§‚†§‚†∂‚†∂‚†æ‚†§‚†Ñ‚¢∏‚†Ä‚°Ä‚†∏‚£ø‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚£á‚†Ä  "
  "    ‚°á‚†Ä‚°á‚†Ä‚†Ä‚°Ä‚†Ä‚°¥‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚°å‚£µ‚°Ä‚¢≥‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢π‚°Ä  "
  "    ‚°á‚†Ä‚†á‚†Ä‚†Ä‚°á‚°∏‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚†Æ‚¢ß‚£Ä‚£ª‚¢Ç‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢ß  "
  "    ‚£á‚†Ä‚¢†‚†Ä‚†Ä‚¢≥‚†á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚°é‚£Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò  "])

;; Setup Code Action Menu
(set g.code_action_menu_show_diff false)

;; Setup Symbols Outline
(symbols-outline.setup {
  :highlight_hovered_item true
  :show_guides true
})

;; Setup Git Signs
(gitsigns.setup {})

;; Setup Which Key
(which-key.setup {})

;; Setup LSP Trouble
(lsp-trouble.setup {})

;; Setup LSP Colors
(lsp-colors.setup {
  :Error "#db4b4b"
  :Warning "#e0af68"
  :Information "#0db9d7"
  :Hint "#10B981"
})

;; Disable builtin statusline
(vim.cmd "set noshowmode")

;; Setup LspKind symbols
(set vim.o.completeopt "menuone,noselect")

(lspkind.init {
  :with_text true
  :symbol_map {
    :Text "Ôî´"
    :Method "Óûõ"
    :Function "∆í"
    :Constructor "Óàè"
    :Variable "Óúñ"
    :Class "Ô≠Ñ "
    :Interface "Ô®†"
    :Module "Ô£ñ"
    :Property "Óò§"
    :Field "Óò§"
    :Event "ÔÉß"
    :TypeParameter "<ÔûÉ>"
    :Unit "Ô•¨"
    :Value "Ô¢ü"
    :Enum "Ô©ó"
    :Keyword "Ô†Ö"
    :Snippet "Ôóè"
    :Color "Óà´"
    :File "ÔÖõ"
    :Folder "ÔÑï"
    :EnumMember "ÔÖù"
    :Constant "Óà¨"
    :Struct "ÔÜ≥"
  }
})

;; Setup telescope
(telescope.setup {
  :pickers {
    :find_files {:theme :dropdown :prompt_prefix "üîç"}
    :buffers {:theme :dropdown}
    :colorscheme {:theme :dropdown}
    :help_tags {:theme :dropdown}
    :live_grep {:theme :dropdown}
  }
  :extensions {
    :fzf {
      :fuzzy true
      :override_generic_sorter true
      :override_file_sorter true
      :case_mode "smart_case"
    }
    :media_files {
      :filetypes ["png" "jpeg" "jpg" "mp4" "webm" "pdf" "webp"]
      :find_cmd "find"
    }
  }
})

;; Setup key bindings

(vim.api.nvim_set_keymap "n" "<leader>ltt" "<cmd>LspTroubleToggle<CR>"      {:noremap true}) ;; Open diagnostic menu
(vim.api.nvim_set_keymap "n" "<leader>ltd" "<cmd>TroubleToggle<CR>"         {:noremap true}) ;; Open TODO menu
(vim.api.nvim_set_keymap "n" "<leader>so"  "<cmd>SymbolsOutline<CR>"        {:noremap true}) ;; Open symbol map

(vim.api.nvim_set_keymap "n" "<leader>ff"  "<cmd>Telescope find_files<CR>"  {:noremap true}) ;; Open find files
(vim.api.nvim_set_keymap "n" "<leader>fg"  "<cmd>Telescope live_grep<CR>"   {:noremap true}) ;; Open live grep
(vim.api.nvim_set_keymap "n" "<leader>fb"  "<cmd>Telescope buffers<CR>"     {:noremap true}) ;; Open openned buffers
(vim.api.nvim_set_keymap "n" "<leader>fh"  "<cmd>Telescope help_tags<CR>"   {:noremap true}) ;; Open help
(vim.api.nvim_set_keymap "n" "<leader>fc"  "<cmd>Telescope colorscheme<CR>" {:noremap true}) ;; Open colorscheme change